# app/schemas/response.py
# ----------------------------------------------------------------------------------
# 响应数据模型 (Response Schemas)
# 作用：定义 API 接口的返回数据结构，确保返回格式的标准化。
# ----------------------------------------------------------------------------------

from pydantic import BaseModel
from typing import List, Optional, Dict, Any

# ----------------------------------------------------------------------------------
# 质控检测单项 (QualityItem)
# 作用：描述单个质控检测项的结果 (如：伪影检测、扫描范围等)
# ----------------------------------------------------------------------------------
class QualityItem(BaseModel):
    item: str          # 检测项名称
    description: str   # 检测说明或建议
    status: str        # 状态："合格" / "不合格" / "检出出血"
    confidence: Optional[float] = None  # AI 置信度 (仅 AI 任务需要)

# ----------------------------------------------------------------------------------
# 质控任务响应 (QualityResponse)
# 作用：描述整个质控分析任务的结果
# ----------------------------------------------------------------------------------
class QualityResponse(BaseModel):
    task: str          # 任务名称
    status: str = "success" # 整体状态
    duration_ms: int   # 耗时 (毫秒)
    results: List[QualityItem] # 检测项列表

# ----------------------------------------------------------------------------------
# 错误响应 (ErrorResponse)
# 作用：通用的错误信息返回结构
# ----------------------------------------------------------------------------------
class ErrorResponse(BaseModel):
    detail: str

# ----------------------------------------------------------------------------------
# 登录响应 (LoginResponse)
# 作用：登录成功后返回的 Token 信息
# ----------------------------------------------------------------------------------
class LoginResponse(BaseModel):
    access_token: str # JWT 令牌字符串
    token_type: str   # 令牌类型 (通常为 "bearer")
    user: Dict[str, Any] # 用户信息摘要
